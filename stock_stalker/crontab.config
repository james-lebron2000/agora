# Stock Stalker 定时任务配置

# 编辑 crontab: crontab -e

# 每30分钟监控服务器状态
*/30 * * * * cd ~/clawd/stock_stalker && ./monitor.sh >> logs/cron_monitor.log 2>&1

# 每天凌晨3点自动备份
0 3 * * * cd ~/clawd/stock_stalker && ./backup.sh >> logs/cron_backup.log 2>&1

# 每小时检查Stock Stalker任务队列
0 * * * * cd ~/clawd && ./task_master check >> task_logs/cron_task.log 2>&1

# 每天上午9点和下午6点发送进度报告
0 9,18 * * * cd ~/clawd && ./task_master_report.sh >> task_logs/cron_report.log 2>&1

# 每周一清理旧日志（保留30天）
0 0 * * 1 find ~/clawd/stock_stalker/logs -name "*.log" -mtime +30 -delete

# 每周日完整系统报告
0 8 * * 0 cd ~/clawd/stock_stalker && python3 -c "
from datetime import datetime
print(f'[{datetime.now()}] Weekly System Report')
print('='*50)
import subprocess
result = subprocess.run(['make', 'status'], capture_output=True, text=True)
print(result.stdout)
" >> logs/weekly_report.log 2>&1
